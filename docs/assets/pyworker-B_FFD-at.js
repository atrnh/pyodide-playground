import{loadPyodide as o}from"https://cdn.jsdelivr.net/pyodide/v0.27.2/full/pyodide.mjs";class t{constructor(e){this.buffer=[],this.decoder=new TextDecoder,this.worker=e}write(e){return this.buffer.push(this.decoder.decode(e)),e.length}flush(){this.worker.postMessage({stdout:this.buffer.join("")}),this.buffer=[]}}async function r(){self.pyodide=await o(),self.synthConsole=new t(self),self.pyodide.setStdout(self.synthConsole)}let d=r();self.addEventListener("message",async({data:s})=>{await d,console.log("worker received message",s);try{const e=await self.pyodide.runPythonAsync(s);console.log("Pyodide result",e),self.synthConsole.flush()}catch(e){self.postMessage({error:e.message})}});
